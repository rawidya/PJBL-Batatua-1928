<!DOCTYPE html>
<html lang="id">
<head>
     <link rel="icon" href="Assets/Logo Kedai Batatua 1928.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batatua 1928 - Kelola Menu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .menu-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .menu-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
            padding: 20px;
        }
        .modal-content {
            max-height: 90vh;
            overflow-y: auto;
            margin: auto;
        }
        .image-preview {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }
    </style>
</head>
<body class="bg-amber-50">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <div class="w-80 p-8 flex flex-col" style="background-color: #A18686;">
        <a href="Homepage.html">
            <div class="text-center mb-16">
                <div class="text-4xl font-bold tracking-widest">BATA</div>
                <div class="text-lg">- 1928 -</div>
                <div class="text-4xl font-bold tracking-widest mt-1">TUA</div>
            </div>
        </a>
            <!-- Menu Items -->
            <nav class="flex-1 space-y-6">
                <a href="dashboard-utama.html" class="flex items-center space-x-4 text-black hover:text-white transition-colors">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                    </svg>
                    <span class="text-2xl font-bold">Dashboard</span>
                </a>

                <a href="dashboard-menu.html" class="flex items-center space-x-4 text-black hover:text-white transition-colors">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                        <rect x="3" y="6" width="18" height="2"/>
                        <rect x="3" y="11" width="18" height="2"/>
                        <rect x="3" y="16" width="18" height="2"/>
                    </svg>
                    <span class="text-2xl font-bold">Kelola Menu</span>
                </a>

                <a href="dashboard-galeri.html" class="flex items-center space-x-4 text-black hover:text-white transition-colors">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                        <rect x="4" y="4" width="16" height="12" rx="1" fill="none" stroke="currentColor" stroke-width="2"/>
                        <circle cx="8.5" cy="9" r="1.5"/>
                        <path d="M4 15l4-4 3 3 5-6 4 5v3H4z"/>
                    </svg>
                    <span class="text-2xl font-bold">Kelola Galeri</span>
                </a>

                <a href="dashboard-admin.html" class="flex items-center space-x-4 text-black hover:text-white transition-colors">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/>
                    </svg>
                    <span class="text-2xl font-bold">Kelola Profil</span>
                </a>
            </nav>

            <!-- Logout -->
            <a href="Login-for-admin.html" class="flex items-center space-x-4 text-black hover:text-gray-700 transition-colors mt-auto">
                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                </svg>
                <span class="text-2xl font-bold">Logout</span>
            </a>
        </div>

       
        <div class="flex-1 p-8">
            <div class="bg-amber-100 p-6 rounded-lg mb-8 flex items-center justify-between">
                <h1 class="text-4xl font-bold">BATATUA 1928 - KELOLA MENU</h1>
                <button onclick="openAddModal()" class="bg-yellow-700 hover:bg-yellow-300 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                    + Tambah Menu
                </button>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="text-center py-16">
                <svg class="w-24 h-24 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                <h3 class="text-xl font-bold text-gray-600 mb-2">Belum ada menu</h3>
                <p class="text-gray-500">Klik tombol "Tambah Menu" untuk menambahkan menu baru</p>
            </div>

            <!-- Menu Grid -->
            <div id="menuGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
        </div>
    </div>

    <div id="menuModal" class="modal">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h2 id="modalTitle" class="text-2xl font-bold mb-6">Tambah Menu Baru</h2>
            <form id="menuForm">
                <div class="mb-4">
                    <label class="block text-gray-700 font-bold mb-2">Nama Menu</label>
                    <input type="text" id="menuName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-amber-600" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-bold mb-2">Harga (Rp)</label>
                    <input type="number" id="menuPrice" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-amber-600" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-bold mb-2">Kategori</label>
                    <select id="menuCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-amber-600" required>
                        <option value="">Pilih Kategori</option>
                        <option value="Makanan">Makanan-berat</option>
                        <option value="Makanan">Makanan-ringan</option>
                        <option value="Minuman">coffe</option>
                        <option value="Dessert">non-coffe</option>
                    </select>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 font-bold mb-2">Foto Menu</label>
                    <input type="file" id="menuImage" accept="image/*" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-amber-600">
                    <div id="imagePreviewContainer" class="mt-3 hidden">
                        <img id="imagePreview" class="image-preview" src="" alt="Preview">
                    </div>
                </div>
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 bg-amber-600 hover:bg-amber-700 text-white py-2 rounded-lg font-bold transition-colors">
                        Simpan
                    </button>
                    <button type="button" onclick="closeModal()" class="flex-1 bg-gray-400 hover:bg-gray-500 text-white py-2 rounded-lg font-bold transition-colors">
                        Batal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        var menus = [];
        var editingId = null;
        
        function loadSampleData() {
            menus = [
                {
                    id: 1,
                    name: 'Mie Bangladesh',
                    price: 15000,
                    category: 'Makanan',
                    image: 'Assets/mie bang.jpg'
                },
                {
                    id: 2,
                    name: 'Sosi Crispy',
                    price: 16000,
                    category: 'Makanan',
                    image: 'Assets/sosis.jpg'
                }
            ];
            renderMenus();
        }

        function renderMenus() {
            var grid = document.getElementById('menuGrid');
            var emptyState = document.getElementById('emptyState');
            
            if (menus.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            grid.innerHTML = '';
            
            for (var i = 0; i < menus.length; i++) {
                var menu = menus[i];
                var card = document.createElement('div');
                card.className = 'menu-card bg-white rounded-lg shadow-md overflow-hidden';
                
                var categoryColors = {
                    'Makanan': 'bg-orange-500',
                    'Minuman': 'bg-blue-500',
                    'Dessert': 'bg-pink-500'
                };
                
                var colorClass = categoryColors[menu.category] || 'bg-gray-500';
                var imageHtml = menu.image ? 
                    '<img src="' + menu.image + '" alt="' + menu.name + '" class="w-full h-48 object-cover">' : 
                    '<div class="w-full h-48 bg-gray-200 flex items-center justify-center"><svg class="w-16 h-16 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg></div>';
                
                card.innerHTML = imageHtml + `
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-xl font-bold text-gray-800">${menu.name}</h3>
                            <span class="px-3 py-1 text-xs font-bold rounded-full ${colorClass} text-white">${menu.category}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-amber-700">Rp ${formatPrice(menu.price)}</span>
                            <div class="flex space-x-2">
                                <button onclick="editMenu(${menu.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors">
                                    Edit
                                </button>
                                <button onclick="deleteMenu(${menu.id})" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors">
                                    Hapus
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            }
        }

        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        function openAddModal() {
            editingId = null;
            document.getElementById('modalTitle').textContent = 'Tambah Menu Baru';
            document.getElementById('menuForm').reset();
            document.getElementById('imagePreviewContainer').classList.add('hidden');
            document.getElementById('menuModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('menuModal').classList.remove('active');
            editingId = null;
        }

        function editMenu(id) {
            var menu = null;
            for (var i = 0; i < menus.length; i++) {
                if (menus[i].id === id) {
                    menu = menus[i];
                    break;
                }
            }
            
            if (menu) {
                editingId = id;
                document.getElementById('modalTitle').textContent = 'Edit Menu';
                document.getElementById('menuName').value = menu.name;
                document.getElementById('menuPrice').value = menu.price;
                document.getElementById('menuCategory').value = menu.category;
                
                if (menu.image) {
                    document.getElementById('imagePreview').src = menu.image;
                    document.getElementById('imagePreviewContainer').classList.remove('hidden');
                } else {
                    document.getElementById('imagePreviewContainer').classList.add('hidden');
                }
                
                document.getElementById('menuModal').classList.add('active');
            }
        }

        function deleteMenu(id) {
            if (confirm('Apakah Anda yakin ingin menghapus menu ini?')) {
                var newMenus = [];
                for (var i = 0; i < menus.length; i++) {
                    if (menus[i].id !== id) {
                        newMenus.push(menus[i]);
                    }
                }
                menus = newMenus;
                renderMenus();
            }
        }

        // Preview image
        document.getElementById('menuImage').onchange = function(e) {
            var file = e.target.files[0];
            if (file) {
                var reader = new FileReader();
                reader.onload = function(event) {
                    document.getElementById('imagePreview').src = event.target.result;
                    document.getElementById('imagePreviewContainer').classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        };

        document.getElementById('menuForm').onsubmit = function(e) {
            e.preventDefault();
            
            var name = document.getElementById('menuName').value.trim();
            var price = parseInt(document.getElementById('menuPrice').value);
            var category = document.getElementById('menuCategory').value;
            var imageFile = document.getElementById('menuImage').files[0];
            
            if (!name || !price || !category) {
                alert('Mohon lengkapi semua field yang wajib diisi!');
                return;
            }
            
            var saveMenu = function(imageData) {
                if (editingId !== null) {
                    for (var i = 0; i < menus.length; i++) {
                        if (menus[i].id === editingId) {
                            menus[i].name = name;
                            menus[i].price = price;
                            menus[i].category = category;
                            if (imageData) {
                                menus[i].image = imageData;
                            }
                            break;
                        }
                    }
                } else {
                    var newId = menus.length > 0 ? Math.max.apply(null, menus.map(function(m) { return m.id; })) + 1 : 1;
                    menus.push({
                        id: newId,
                        name: name,
                        price: price,
                        category: category,
                        image: imageData || null
                    });
                }
                
                renderMenus();
                closeModal();
            };
            
            if (imageFile) {
                var reader = new FileReader();
                reader.onload = function(event) {
                    saveMenu(event.target.result);
                };
                reader.readAsDataURL(imageFile);
            } else {
                var currentImage = editingId !== null ? menus.find(function(m) { return m.id === editingId; }).image : null;
                saveMenu(currentImage);
            }
        };

    
        document.getElementById('menuModal').onclick = function(e) {
            if (e.target === this) {
                closeModal();
            }
        };
        loadSampleData();
    </script>
</body>
</html>